syntax = "proto3";
package protos;
import "base.proto";

//enum ActionType {
//    None = 0;
//    Attack = 1;  //普通攻击
//    UseItem = 2; //使用道具
//    Skip = 3;    //跳过turn
//    Open = 4;    //翻块
//    Skill = 5;   //使用技能
//    Buff = 6;    //触发buff
//}

//enum EffectType {
//    None = 0;
//    Attacked = 1;  //受到普通攻击
//    SkillDamge = 2; //受到技能伤害
//    Skip = 3;    //跳过turn
//    Open = 4;    //翻块
//    Skill = 5;   //使用技能
//    Buff = 6;    //触发buff
//}

///目标类型枚举
//#[derive(Clone, Debug, PartialEq)]
//pub enum TargetType {
//        None = 0,            //无效目标
//        Cell = 1,            //地图块
//        AnyPlayer = 2,       //任意玩家
//        PlayerSelf = 3,      //玩家自己
//        AllPlayer = 4,       //所有玩家
//        OtherAllPlayer = 5,  //除自己外所有玩家
//        OtherAnyPlayer = 6,  //除自己外任意玩家
//        UnOpenCell = 7,      //未翻开的地图块
//        UnPairCell = 8,      //未配对的地图块
//        NullCell = 9,        //空的地图块，上面没人
//        UnPairNullCell = 10, //未配对的地图块
//        CellPlayer = 11,     //地图块上的玩家
//}

//行动请求
//cmd=20031
message C_ACTION{
    uint32 action_type = 1;//行动类型 可以是使用技能，可以是普通攻击,可以是使用道具
    uint32 value = 2;//行动对应类型的值
    repeated uint32 target = 3;//目标 可以是块，可以是玩家，可以是自己
}

//战斗开始通知
//cmd=10030
message S_BATTLE_START_NOTICE{
    repeated BattleCharacterPt battle_cters = 1;//战斗角色数据
}

//行动推送
//cmd=10031
message S_ACTION_NOTICE{
    repeated ActionUnitPt action_uints = 1;//行动单位
}

//turn玩家状态结算，turn开始的时候
//cmd = 10032
message S_BATTLE_TURN_NOTICE{
    uint32 user_id = 1;//玩家id
    repeated BuffPt buffs = 2;//玩家身上buff数据
}

//地图刷新推送
//cmd = 10033
message S_MAP_REFRESH_NOTICE{
    uint32 tile_map_id = 1;//地图配置id
    repeated uint32 cells = 2;//包含的块
    repeated WorldCellPt world_cell = 3;//世界块
}

//结算推送
//cmd=10034
message S_SETTLEMENT_NOTICE{
    repeated uint32 user_id = 1;//玩家名次
}